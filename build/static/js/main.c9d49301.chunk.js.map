{"version":3,"sources":["components/home.js","components/showGroceries.js","App.js","reportWebVitals.js","index.js"],"names":["Home","props","useState","name","setName","image","setImage","description","setDescription","location","setLocation","price","setPrice","show","setShow","handleClose","Navbar","Container","Brand","href","Toggle","Nav","className","Link","cUSDBalance","Collapse","Button","onClick","variant","Modal","onHide","centered","Header","closeButton","Title","Form","Body","FloatingLabel","controlId","label","Control","type","onChange","e","target","value","placeholder","style","height","as","Footer","disabled","addGrocery","Ideas","newPrice","setNewPrice","Row","xs","md","groceries","map","g","Card","width","Badge","bg","sold","src","alt","objectFit","Text","walletAddress","owner","toggleSoldout","index","Group","modifyPrice","soldout","buy","deleteGrocery","contractAddress","App","contract","setcontract","address","setAddress","kit","setKit","setcUSDBalance","setGroceries","connectToWallet","a","window","celo","enable","web3","Web3","newKitFromWeb3","eth","getAccounts","accounts","user_address","defaultAccount","console","log","alert","getBalance","useCallback","getTotalBalance","balance","USDBalance","cUSD","shiftedBy","toFixed","Contract","grocery","getGroceries","methods","getGroceriesLength","call","groceriesLength","_groceries","Promise","resolve","reject","getGrocery","push","all","_name","_image","_description","_location","_price","BigNumber","toString","send","from","_index","_newPrice","changePrice","deleteGroceryListing","cUSDContract","IERC","ammount","approve","buyGrocery","useEffect","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"s3IAyJeA,EArJF,SAACC,GACZ,MAAwBC,mBAAS,IAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA0BF,mBAAS,IAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAAsCJ,mBAAS,IAA/C,mBAAOK,EAAP,KAAoBC,EAApB,KACA,EAAgCN,mBAAS,IAAzC,mBAAOO,EAAP,KAAiBC,EAAjB,KACA,EAA0BR,mBAAS,IAAnC,mBAAOS,EAAP,KAAcC,EAAd,KAKA,EAAwBV,oBAAS,GAAjC,mBAAOW,EAAP,KAAaC,EAAb,KAEMC,EAAc,kBAAMD,GAAQ,IAGlC,OACF,qCACI,cAACE,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,WACE,cAACD,EAAA,EAAOE,MAAR,CAAcC,KAAK,QAAnB,4BACA,cAACH,EAAA,EAAOI,OAAR,IACA,cAACC,EAAA,EAAD,CAAKC,UAAU,UAAf,SACA,eAACD,EAAA,EAAIE,KAAL,CAAUJ,KAAK,QAAf,sBAAiClB,EAAMuB,YAAvC,YAGA,cAACR,EAAA,EAAOS,SAAR,CAAiBH,UAAU,sBAA3B,SAEA,cAACI,EAAA,EAAD,CACAC,QAfa,kBAAMb,GAAQ,IAgB3Bc,QAAQ,OAFR,SAKA,4DAQF,eAACC,EAAA,EAAD,CAAOhB,KAAMA,EAAMiB,OAAQf,EAAagB,UAAQ,EAAhD,UACE,cAACF,EAAA,EAAMG,OAAP,CAAcC,aAAW,EAAzB,SACE,cAACJ,EAAA,EAAMK,MAAP,4BAEF,cAACC,EAAA,EAAD,UACE,eAACN,EAAA,EAAMO,KAAP,WACE,cAACC,EAAA,EAAD,CACEC,UAAU,YACVC,MAAM,OACNjB,UAAU,OAHZ,SAKE,cAACa,EAAA,EAAKK,QAAN,CACEC,KAAK,OACLC,SAAU,SAACC,GACTvC,EAAQuC,EAAEC,OAAOC,QAEnBC,YAAY,WAIhB,cAACT,EAAA,EAAD,CACEC,UAAU,aACVC,MAAM,QACNjB,UAAU,OAHZ,SAKE,cAACa,EAAA,EAAKK,QAAN,CACEC,KAAK,OACLM,MAAO,CAAEC,OAAQ,QACjBN,SAAU,SAACC,GACTrC,EAASqC,EAAEC,OAAOC,YAKxB,cAACR,EAAA,EAAD,CACEC,UAAU,mBACVC,MAAM,eACNjB,UAAU,OAHZ,SAKE,cAACa,EAAA,EAAKK,QAAN,CACES,GAAG,WACHH,YAAY,cACZC,MAAO,CAAEC,OAAQ,QACjBN,SAAU,SAACC,GACTnC,EAAemC,EAAEC,OAAOC,YAK9B,cAACR,EAAA,EAAD,CACEC,UAAU,WACVC,MAAM,WACNjB,UAAU,OAHZ,SAKE,cAACa,EAAA,EAAKK,QAAN,CACGC,KAAK,OACNK,YAAY,WACZC,MAAO,CAAEC,OAAQ,QACjBN,SAAU,SAACC,GACTjC,EAAYiC,EAAEC,OAAOC,YAM3B,cAACR,EAAA,EAAD,CACEC,UAAU,QACVC,MAAM,QACNjB,UAAU,OAHZ,SAKE,cAACa,EAAA,EAAKK,QAAN,CACGC,KAAK,SACNK,YAAY,QACZC,MAAO,CAAEC,OAAQ,QACjBN,SAAU,SAACC,GACT/B,EAAS+B,EAAEC,OAAOC,iBAQ5B,eAAChB,EAAA,EAAMqB,OAAP,WACE,cAACxB,EAAA,EAAD,CAAQE,QAAQ,oBAAoBD,QAASZ,EAA7C,mBAGA,cAACW,EAAA,EAAD,CACEE,QAAQ,OACRuB,WAzHiBhD,GAAQE,GAASE,GAAeE,GAAYE,GA0H7DgB,QAAS,WACP1B,EAAMmD,WACJjD,EACAE,EACAE,EACAE,EACAE,GAEFI,KAXJ,uC,2BC5HGsC,EAAQ,SAACpD,GAEtB,MAAgCC,mBAAS,IAAzC,mBAAOoD,EAAP,KAAiBC,EAAjB,KAEA,OACI,cAACC,EAAA,EAAD,CAAKC,GAAI,EAAGC,GAAI,EAAGpC,UAAU,MAA7B,SACCrB,EAAM0D,UAAUC,KAAI,SAACC,GAAD,OACrB,eAACC,EAAA,EAAD,CAAoBf,MAAO,CAAEgB,MAAO,SAApC,UACQ,cAACD,EAAA,EAAK9B,OAAN,UACA,eAACgC,EAAA,EAAD,CAAOC,GAAG,YAAY3C,UAAU,UAAhC,UACGuC,EAAEK,KADL,aAIL,qBAAK5C,UAAU,mBAAf,SACG,qBAAK6C,IAAKN,EAAExD,MAAO+D,IAAKP,EAAEtD,YAAawC,MAAO,CAAEsB,UAAW,aAE/D,eAACP,EAAA,EAAK1B,KAAN,WACE,cAAC0B,EAAA,EAAK5B,MAAN,UAAa2B,EAAE1D,OACf,eAAC2D,EAAA,EAAK5B,MAAN,WAAa2B,EAAElD,MAAS,KAAxB,WACA,cAACmD,EAAA,EAAK5B,MAAN,UAAa2B,EAAEpD,WACf,cAACqD,EAAA,EAAKQ,KAAN,CAAWhD,UAAU,cAArB,SAAoCuC,EAAEtD,cAGrCN,EAAMsE,gBAAkBV,EAAEW,OAE5B,cAAC9C,EAAA,EAAD,CAAQE,QAAQ,OAAQD,QAAS,kBAAK1B,EAAMwE,cAAcZ,EAAEa,QAA5D,6BAMDzE,EAAMsE,gBAAkBV,EAAEW,OACzB,eAACrC,EAAA,EAAD,WACA,cAACA,EAAA,EAAKwC,MAAN,CAAYrD,UAAU,YAAtB,SACE,cAACa,EAAA,EAAKK,QAAN,CAAcC,KAAK,SAASK,YAAY,kBAAkBJ,SAAU,SAACC,GAAD,OAAOY,EAAYZ,EAAEC,OAAOC,YAElG,cAACnB,EAAA,EAAD,CAAQE,QAAQ,OAAON,UAAU,OAAOK,QAAS,kBAAK1B,EAAM2E,YAAYf,EAAEa,MAAOpB,IAAjF,6BAODrD,EAAMsE,gBAAkBV,EAAEW,QAAuB,IAAdX,EAAEgB,SACrC,cAACnD,EAAA,EAAD,CAAQJ,UAAU,OAAOK,QAAU,kBAAK1B,EAAM6E,IAAIjB,EAAEa,QAApD,yBAGLzE,EAAMsE,gBAAkBV,EAAEW,QAAuB,IAAdX,EAAEgB,SAC/B,cAACf,EAAA,EAAK5B,MAAN,uBAGFjC,EAAMsE,gBAAkBV,EAAEW,OACzB,cAAC9C,EAAA,EAAD,CAAQJ,UAAU,OAAOK,QAAU,kBAAK1B,EAAM8E,cAAclB,EAAEa,QAA9D,sCA7CSb,EAAEa,a,8DCDXM,EAAkB,6CAuLTC,MAlLf,WACE,MAAgC/E,mBAAS,MAAzC,mBAAOgF,EAAP,KAAiBC,EAAjB,KACA,EAA8BjF,mBAAS,MAAvC,mBAAOkF,EAAP,KAAgBC,EAAhB,KACA,EAAsBnF,mBAAS,MAA/B,mBAAOoF,EAAP,KAAYC,EAAZ,KACA,EAAsCrF,mBAAS,GAA/C,mBAAOsB,EAAP,KAAoBgE,EAApB,KACA,EAAkCtF,mBAAS,IAA3C,mBAAOyD,EAAP,KAAkB8B,EAAlB,KAIMC,EAAe,uCAAG,kCAAAC,EAAA,0DAClBC,OAAOC,KADW,0CAGZD,OAAOC,KAAKC,SAHA,cAIZC,EAAO,IAAIC,IAAKJ,OAAOC,MACzBP,EAAMW,yBAAeF,GALP,SAOKT,EAAIS,KAAKG,IAAIC,cAPlB,cAOZC,EAPY,OAQZC,EAAeD,EAAS,GAC9Bd,EAAIgB,eAAiBD,EATH,UAWZhB,EAAWgB,GAXC,yBAYZd,EAAOD,GAZK,0DAclBiB,QAAQC,IAAR,MAdkB,gCAiBpBC,MAAM,kBAjBc,0DAAH,qDAqBfC,EAAaC,sBAAW,sBAAC,gCAAAhB,EAAA,+EAELL,EAAIsB,gBAAgBxB,GAFf,OAErByB,EAFqB,OAGrBC,EAAaD,EAAQE,KAAKC,WAvCf,IAuC0CC,QAAQ,GAE7D/B,EAAW,IAAII,EAAIS,KAAKG,IAAIgB,SAASC,EAASnC,GACpDG,EAAYD,GACZM,EAAesB,GAPY,kDAS3BP,QAAQC,IAAR,MAT2B,0DAW5B,CAACpB,EAASE,IAIP8B,EAAeT,sBAAW,sBAAC,oCAAAhB,EAAA,sEACDT,EAASmC,QAAQC,qBAAqBC,OADrC,OAG/B,IAFMC,EADyB,OAEzB7D,EAAY,GAFa,WAGtBe,GACP,IAAI+C,EAAa,IAAIC,QAAJ,uCAAY,WAAOC,EAASC,GAAhB,eAAAjC,EAAA,sEACTT,EAASmC,QAAQQ,WAAWnD,GAAO6C,OAD1B,OACzBJ,EADyB,OAG3BQ,EAAQ,CACNjD,MAAOA,EACPF,MAAO2C,EAAQ,GACfhH,KAAMgH,EAAQ,GACd9G,MAAO8G,EAAQ,GACf5G,YAAa4G,EAAQ,GACrB1G,SAAU0G,EAAQ,GAClBxG,MAAOwG,EAAQ,GACfjD,KAAMiD,EAAQ,GACdtC,QAASsC,EAAQ,KAZQ,2CAAZ,yDAejBxD,EAAUmE,KAAKL,IAhBR/C,EAAQ,EAAGA,EAAQ8C,EAAiB9C,IAAU,EAA9CA,GAHsB,gBAuBNgD,QAAQK,IAAIpE,GAvBN,OAuBzB8D,EAvByB,OAwB/BhC,EAAagC,GAxBkB,4CAyB9B,CAACvC,IAGE9B,EAAU,uCAAG,WACjB4E,EACAC,EACAC,EACAC,EACAC,GALiB,eAAAzC,EAAA,6DAQbhF,EAAQ,IAAI0H,IAAUD,GAAQpB,UAvFf,IAuFyCsB,WAR3C,kBAUTpD,EAASmC,QACZjE,WAAW4E,EAAOC,EAAQC,EAAcC,EAAWxH,GACnD4H,KAAK,CAAEC,KAAMpD,IAZD,OAafgC,IAbe,gDAefX,MAAM,EAAD,IAfU,yDAAH,8DAoBV7B,EAAW,uCAAG,WAAO6D,EAAQC,GAAf,eAAA/C,EAAA,6DACdhF,EAAQ,IAAI0H,IAAUK,GAAW1B,UApGlB,IAoG4CsB,WAD7C,kBAGVpD,EAASmC,QAAQsB,YAAYF,EAAQ9H,GAAO4H,KAAK,CAAEC,KAAMpD,IAH/C,OAIhBgC,IACAX,MAAM,2CALU,gDAOhBA,MAAM,EAAD,IAPW,yDAAH,wDAWXhC,EAAa,uCAAG,WAAOgE,GAAP,SAAA9C,EAAA,+EAGZT,EAASmC,QAAQ5C,cAAcgE,GAAQF,KAAK,CAAEC,KAAMpD,IAHxC,OAIlBgC,IACAX,MAAM,0CALY,gDAOlBA,MAAM,EAAD,IAPa,yDAAH,sDAWb1B,EAAa,uCAAG,WACpB0D,GADoB,SAAA9C,EAAA,+EAIZT,EAASmC,QACZuB,qBAAqBH,GACrBF,KAAK,CAAEC,KAAMpD,IANE,OAOlBgC,IACAX,MAAM,8CARY,gDAUlBA,MAAM,EAAD,IAVa,yDAAH,sDAeb3B,EAAG,uCAAG,WAAO2D,GAAP,iBAAA9C,EAAA,sEAEFkD,EAAe,IAAIvD,EAAIS,KAAKG,IAAIgB,SAAS4B,EAxIzB,8CAyIhBC,EAAUpF,EAAU8E,GAAQ9H,MAH1B,SAIFkI,EAAaxB,QAChB2B,QAAQhE,EAAiB+D,GACzBR,KAAK,CAAEC,KAAMpD,IANR,uBAOFF,EAASmC,QAAQ4B,WAAWR,GAAQF,KAAK,CAAEC,KAAMpD,IAP/C,OAQRgC,IACAV,IACAD,MAAM,0CAVE,kDAYRA,MAAM,EAAD,IAZG,0DAAH,sDAgCT,OAhBAyC,qBAAU,WACRxD,MACC,IAEHwD,qBAAU,WACJ5D,GAAOF,GACTsB,MAED,CAACpB,EAAKF,EAASsB,IAElBwC,qBAAU,WACJhE,GACFkC,MAED,CAAClC,EAAUkC,IAGZ,sBAAK9F,UAAU,MAAf,UACE,cAAC,EAAD,CAAME,YAAaA,EAAa4B,WAAYA,IAC5C,cAAC,EAAD,CACAO,UAAWA,EACXmB,IAAKA,EACLP,cAAea,EACfR,YAAaA,EACbG,cAAeA,EACfN,cAAeA,QCjLN0E,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,cCCdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.c9d49301.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\n\r\nimport { Button, Modal, Form, FloatingLabel, Nav, Container, Navbar } from \"react-bootstrap\";\r\n\r\nconst Home = (props) => {\r\n  const [name, setName] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n\r\n\r\n  const isFormFilled = () => name && image && description && location && price;\r\n\r\n  const [show, setShow] = useState(false);\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  return (\r\n<>\r\n    <Navbar>\r\n      <Container>\r\n        <Navbar.Brand href=\"#home\">Celo Groceries</Navbar.Brand>\r\n        <Navbar.Toggle />\r\n        <Nav className=\"me-auto\">\r\n        <Nav.Link href=\"#home\">Balance: {props.cUSDBalance}cUSD</Nav.Link>\r\n       \r\n          </Nav>\r\n        <Navbar.Collapse className=\"justify-content-end\">\r\n        \r\n        <Button\r\n        onClick={handleShow}\r\n        variant=\"dark\"\r\n        \r\n      >\r\n        <h4> Add new Grocery </h4>\r\n      </Button>\r\n        </Navbar.Collapse>\r\n      </Container>\r\n    </Navbar>\r\n\r\n    \r\n      \r\n      <Modal show={show} onHide={handleClose} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>New grocery</Modal.Title>\r\n        </Modal.Header>\r\n        <Form>\r\n          <Modal.Body>\r\n            <FloatingLabel\r\n              controlId=\"inputName\"\r\n              label=\"Name\"\r\n              className=\"mb-3\"\r\n            >\r\n              <Form.Control\r\n                type=\"text\"\r\n                onChange={(e) => {\r\n                  setName(e.target.value);\r\n                }}\r\n                placeholder=\"name\"\r\n              />\r\n            </FloatingLabel>\r\n\r\n            <FloatingLabel\r\n              controlId=\"inputImage\"\r\n              label=\"image\"\r\n              className=\"mb-3\"\r\n            >\r\n              <Form.Control\r\n                type=\"text\"\r\n                style={{ height: \"80px\" }}\r\n                onChange={(e) => {\r\n                  setImage(e.target.value);\r\n                }}\r\n              />\r\n            </FloatingLabel>\r\n            \r\n            <FloatingLabel\r\n              controlId=\"inputDescription\"\r\n              label=\"Description \"\r\n              className=\"mb-3\"\r\n            >\r\n              <Form.Control\r\n                as=\"textarea\"\r\n                placeholder=\"description\"\r\n                style={{ height: \"80px\" }}\r\n                onChange={(e) => {\r\n                  setDescription(e.target.value);\r\n                }}\r\n              />\r\n            </FloatingLabel>\r\n\r\n            <FloatingLabel\r\n              controlId=\"location\"\r\n              label=\"location\"\r\n              className=\"mb-3\"\r\n            >\r\n              <Form.Control\r\n                 type=\"text\"\r\n                placeholder=\"location\"\r\n                style={{ height: \"80px\" }}\r\n                onChange={(e) => {\r\n                  setLocation(e.target.value);\r\n                }}\r\n              />\r\n            </FloatingLabel>\r\n\r\n\r\n            <FloatingLabel\r\n              controlId=\"price\"\r\n              label=\"price\"\r\n              className=\"mb-3\"\r\n            >\r\n              <Form.Control\r\n                 type=\"number\"\r\n                placeholder=\"price\"\r\n                style={{ height: \"80px\" }}\r\n                onChange={(e) => {\r\n                  setPrice(e.target.value);\r\n                }}\r\n              />\r\n            </FloatingLabel>\r\n            \r\n           \r\n          </Modal.Body>\r\n        </Form>\r\n        <Modal.Footer>\r\n          <Button variant=\"outline-secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button\r\n            variant=\"dark\"\r\n            disabled={!isFormFilled()}\r\n            onClick={() => {\r\n              props.addGrocery( \r\n                name,\r\n                image,\r\n                description,\r\n                location,\r\n                price,\r\n              );\r\n              handleClose();\r\n            }}\r\n          >\r\n            Add new grocery\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport { useState } from \"react\";\r\nimport { Card, Form, Badge, Button, Row } from 'react-bootstrap';\r\n\r\n\r\n\r\n\r\nexport const Ideas = (props) => {\r\n\r\nconst [newPrice, setNewPrice] = useState('');\r\n\r\nreturn ( \r\n    <Row xs={1} md={3} className=\"g-4\">\r\n    {props.groceries.map((g)=> (\r\n    <Card key={g.index} style={{ width: '28rem' }}>\r\n            <Card.Header>\r\n            <Badge bg=\"secondary\" className=\"ms-auto\">\r\n              {g.sold} Sold\r\n            </Badge>\r\n            </Card.Header>\r\n       <div className=\" ratio ratio-4x3\">\r\n          <img src={g.image} alt={g.description} style={{ objectFit: \"cover\" }} />\r\n        </div>\r\n      <Card.Body>\r\n        <Card.Title>{g.name}</Card.Title>\r\n        <Card.Title>{g.price  / 1000000000000000000} cUSD</Card.Title>\r\n        <Card.Title>{g.location}</Card.Title>\r\n        <Card.Text className=\"flex-grow-1\">{g.description}</Card.Text>\r\n\r\n\r\n        {props.walletAddress === g.owner &&(\r\n       \r\n       <Button variant=\"dark\"  onClick={()=> props.toggleSoldout(g.index)}>\r\n         Toggle Sold out\r\n       </Button>\r\n   \r\n      )}\r\n\r\n     {props.walletAddress === g.owner &&(\r\n       <Form>\r\n       <Form.Group className=\"mb-1 mt-4\" >\r\n         <Form.Control type=\"number\" placeholder=\"Enter new price\" onChange={(e) => setNewPrice(e.target.value)} />\r\n       </Form.Group>\r\n       <Button variant=\"dark\" className=\"mt-1\" onClick={()=> props.modifyPrice(g.index, newPrice)}>\r\n         Change Price\r\n       </Button>\r\n     </Form>\r\n      )}\r\n\r\n\r\n     {props.walletAddress !== g.owner && g.soldout === false &&(\r\n      <Button className=\"mt-2\" onClick ={()=> props.buy(g.index)}>Buy Grocery</Button>\r\n      )}\r\n\r\n{props.walletAddress !== g.owner && g.soldout === true &&(\r\n       <Card.Title>SOLD OUT</Card.Title>\r\n      )}\r\n\r\n    {props.walletAddress === g.owner &&(\r\n      <Button className=\"mt-4\" onClick ={()=> props.deleteGrocery(g.index)}>Delete this grocery</Button>\r\n      )}\r\n\r\n      </Card.Body>\r\n    </Card>\r\n  ))}\r\n</Row>\r\n  \r\n)};\r\n","\nimport './App.css';\nimport Home from './components/home';\nimport { Ideas } from './components/showGroceries';\nimport { useState, useEffect, useCallback } from \"react\";\nimport Web3 from \"web3\";\nimport { newKitFromWeb3 } from \"@celo/contractkit\";\nimport BigNumber from \"bignumber.js\";\nimport grocery from \"./contracts/grocery.abi.json\";\nimport IERC from \"./contracts/IERC.abi.json\";\n\n\nconst ERC20_DECIMALS = 18;\nconst contractAddress = \"0xbC7BdE71aeF4ee5eA9431E84FCbc0bF647301c9e\";\nconst cUSDContractAddress = \"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1\";\n\n\n\nfunction App() {\n  const [contract, setcontract] = useState(null);\n  const [address, setAddress] = useState(null);\n  const [kit, setKit] = useState(null);\n  const [cUSDBalance, setcUSDBalance] = useState(0);\n  const [groceries, setGroceries] = useState([]);\n  \n\n\n  const connectToWallet = async () => {\n    if (window.celo) {\n      try {\n        await window.celo.enable();\n        const web3 = new Web3(window.celo);\n        let kit = newKitFromWeb3(web3);\n\n        const accounts = await kit.web3.eth.getAccounts();\n        const user_address = accounts[0];\n        kit.defaultAccount = user_address;\n\n        await setAddress(user_address);\n        await setKit(kit);\n      } catch (error) {\n        console.log(error);\n      }\n    } else {\n      alert(\"Error Occurred\");\n    }\n  };\n\n  const getBalance = useCallback(async () => {\n    try {\n      const balance = await kit.getTotalBalance(address);\n      const USDBalance = balance.cUSD.shiftedBy(-ERC20_DECIMALS).toFixed(2);\n\n      const contract = new kit.web3.eth.Contract(grocery, contractAddress);\n      setcontract(contract);\n      setcUSDBalance(USDBalance);\n    } catch (error) {\n      console.log(error);\n    }\n  }, [address, kit]);\n\n\n\n  const getGroceries = useCallback(async () => {\n    const groceriesLength = await contract.methods.getGroceriesLength().call();\n    const groceries = [];\n    for (let index = 0; index < groceriesLength; index++) {\n      let _groceries = new Promise(async (resolve, reject) => {\n      let grocery = await contract.methods.getGrocery(index).call();\n\n        resolve({\n          index: index,\n          owner: grocery[0],\n          name: grocery[1],\n          image: grocery[2],\n          description: grocery[3],\n          location: grocery[4],\n          price: grocery[5],\n          sold: grocery[6],\n          soldout: grocery[7],\n        });\n      });\n      groceries.push(_groceries);\n    }\n\n\n    const _groceries = await Promise.all(groceries);\n    setGroceries(_groceries);\n  }, [contract]);\n\n\n  const addGrocery = async (\n    _name,\n    _image,\n    _description,\n    _location,\n    _price,\n \n  ) => {\n    let price = new BigNumber(_price).shiftedBy(ERC20_DECIMALS).toString();\n    try {\n      await contract.methods\n        .addGrocery(_name, _image, _description, _location, price)\n        .send({ from: address });\n      getGroceries();\n    } catch (error) {\n      alert(error);\n    }\n  };\n\n\n  const modifyPrice = async (_index, _newPrice) => { \n    let price = new BigNumber(_newPrice).shiftedBy(ERC20_DECIMALS).toString();\n    try {\n      await contract.methods.changePrice(_index, price).send({ from: address });\n      getGroceries();\n      alert(\"you have successfully changed the price\");\n    } catch (error) {\n      alert(error);\n    }};\n\n    \n  const toggleSoldout = async (_index) => { \n    \n    try {\n      await contract.methods.toggleSoldout(_index).send({ from: address });\n      getGroceries();\n      alert(\"you have successfully toggled sold out\");\n    } catch (error) {\n      alert(error);\n    }};\n\n\n  const deleteGrocery = async (\n    _index\n  ) => {\n    try {\n      await contract.methods\n        .deleteGroceryListing(_index)\n        .send({ from: address });\n      getGroceries();\n      alert(\"you have successfully deleted this grocery\");\n    } catch (error) {\n      alert(error);\n    }\n  };\n\n\n  const buy = async (_index) => {\n    try {\n      const cUSDContract = new kit.web3.eth.Contract(IERC, cUSDContractAddress);\n        let ammount = groceries[_index].price;\n      await cUSDContract.methods\n        .approve(contractAddress, ammount)\n        .send({ from: address });\n      await contract.methods.buyGrocery(_index).send({ from: address });\n      getGroceries();\n      getBalance();\n      alert(\"you have successfully bought a grocery\");\n    } catch (error) {\n      alert(error);\n    }};\n\n\n  useEffect(() => {\n    connectToWallet();\n  }, []);\n\n  useEffect(() => {\n    if (kit && address) {\n      getBalance();\n    }\n  }, [kit, address, getBalance]);\n\n  useEffect(() => {\n    if (contract) {\n      getGroceries();\n    }\n  }, [contract, getGroceries]);\n  \n  return (\n    <div className=\"App\">\n      <Home cUSDBalance={cUSDBalance} addGrocery={addGrocery} />\n      <Ideas \n      groceries={groceries} \n      buy={buy} \n      walletAddress={address} \n      modifyPrice={modifyPrice}\n      deleteGrocery={deleteGrocery}\n      toggleSoldout={toggleSoldout}\n      />\n      \n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}